# Win32 编程基础

```c
wWinMain(
    _In_ HINSTANCE hInstance,
    _In_opt_ HINSTANCE hPrevInstance,
    _In_ LPWSTR lpCmdLine,
    _In_ int nShowCmd
    );
```



2. 窗口处理函数

3. 注册窗口类，向操作系统写入数据

4. 创建窗口 （在内存中创建窗口，开辟内存并绑定数据）
5. 显示窗口 （在显示器中绘制图像）
6. 消息循环 （获取，翻译，派发）
7. 消息处理

# Windows GUI

1990 年 5 月 22 日，Windows 3.0 诞生了，微软帝国从此奠基，虽然没有和 Mac 一样精美的界面，但 Windows 兼容各个硬件厂家的框架才是它的致命武器。从 GDI 到 GDI+ 再到 Direct2D

![image-20240229133804700](./assets/image-20240229133804700.png)

GDI 

GDI 是 Graphics Device Interface 的缩写，含义是图形设备接口，它的主要任务是负责系统与绘图程序之间的信息交换，处理所有 Windows 程序的图形输出。 在 Windows 操作系统下，绝大多数具备图形界面的应用程序都离不开 GDI，我们利用 GDI 所提供的众多 API 就可以方便的在屏幕、打印机及其它输出设备上输出图形、文本等操作。 GDI 具有如下特点： 不允许程序直接访问物理显示硬件，通过称为“设备环境”的抽象接口间接访问显示硬件 程序需要与显示硬件（显示器、打印机等） 进行通讯时，必须首先获得与特定窗口相关联的设备环境 用户无需关心具体的物理设备类型 Windows 参考设备环境的数据结构完成数据的输出



GDI+ 

是 GDI 的后续版本，最早于 2000 年随 Windows 2000 一起推出，后来又被包装进 .NET 框架的托管类库中，成为 .NET 中窗体绘图的主要工具。 GDI+ 主要提供了以下三类服务: 二维矢量图形：GDI+ 提供了存储图形基元自身信息的类（或结构体）、存储图形基元绘制方式信息的类以及实际进行绘制的类； 图像处理：大多数图片都难以划定为直线和曲线的集合，无法使用二维矢量图形方式进行处理。因此，GDI+ 为我们提供了 Bitmap、Image 等类。它们可用于显示、操作和保存 BMP、JPG、GIF 等图像。 文字显示：GDI+ 支持使用各种字体、字号和样式来显示文本。 GDI 接口是基于函数的，而 GDI+ 是基于 C++ OO 的编程接口，因此使用起来比 GDI 要方便。因为 GDI+ 实际上是 GDI 的封装和扩展，所以执行效率一般要低于 GDI.



> GDI 的核心是设备上下文，GDI 函数都依赖于设备上下文句柄，其编程方式是基于句柄的；GDI+ 无需时刻依赖于句柄或设备上下文，用户只需创建一个 Graphics 对象，就可以用面向对象的方式调用其成员函数进行图形操作，编程方式是基于对象的。 GDI 在使用设备上下文绘制线条之前，必须先调用 SelectObject 以使钢笔对象和设备上下文关联。其后，在设备上下文中绘制的所有线条均使用该钢笔，直到选择另一支不同的钢笔为止。GDI 中有当前位置的概念，所以在使用 GDI 绘制线条前应该先使用MoveTo 移动当前位置，再使用 LineTo 画线。



Direct2D

Direct2D 是一个基于 Direct3D 的 2D 图形 API，可以利用硬件加速特性来提供高性能、高质量的 2D 渲染。而且十分方便的是，Direct2D 与 GDI，GDI+ 和 D3D 都是可以交互的。

